import"./assets/modulepreload-polyfill-ec808ebb.js";import{a as d}from"./assets/vendor-26fe51b3.js";document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".open-modal"),t=document.querySelector(".modal"),o=t.querySelector(".modal-close"),n=t.querySelector(".add-to-list"),s=t.querySelector(".modal-body"),i=t.querySelector(".under-btn-text");e.addEventListener("click",function(){t.classList.add("open"),document.body.style.overflow="hidden"});const a=function(){t.classList.remove("open"),document.body.style.overflow=""};o.addEventListener("click",a),s.addEventListener("click",a),document.addEventListener("keydown",function(r){r.key==="Escape"&&a()}),n.addEventListener("click",function(r){r.stopPropagation();let c=JSON.parse(localStorage.getItem("shoppingList"))||[];const l=t.querySelector(".book-title").textContent;c.includes(l)?c=c.filter(y=>y!==l):c.push(l),localStorage.setItem("shoppingList",JSON.stringify(c));const g=p(c);i.style.display=g?"block":"none"});function p(r){const c=t.querySelector(".book-title").textContent,l=r.includes(c);return l?n.textContent="Remove from the shopping list":n.textContent="Add to shopping list",l}const m=JSON.parse(localStorage.getItem("shoppingList"))||[];p(m)});d.defaults.baseURL="https://books-backend.p.goit.global/";async function u(){const e=await d.get("/books/category-list");return console.log(e.data),e.data}function b(){return d.get("/books/top-books").then(e=>e.data)}function h(e){return d.get(`/books/category?category=${e}`).then(t=>t.data)}b().then(e=>console.log(e));function k(e,t){const o=t===0?"mobile-visible":"",n=t<3?"tablet-visible":"",s=t<5?"desktop-visible":"";return`
    <li>
      <div class="book-category-card ${o} ${n} ${s}">
        <img class="bookByCategory-img" src="${e.book_image}" alt="${e.title}">
        <div class="book-category-details">
          <h3 class="book-category-title">${e.title}</h3>
          <p class="book-category-author">${e.author}</p>
        </div>
      </div>
    </li>
  `}function f(e,t){const o=document.querySelector(`.book-category[data-category="${e}"] .books-category-list`);if(o){const n=t.map((s,i)=>k(s,i)).join("");o.innerHTML=n}}function L(){u().then(e=>{e.forEach(t=>{h(t.list_name).then(o=>{f(t.list_name,o)}).catch(o=>console.error(`Помилка при завантаженні книг для категорії ${t.list_name}:`,o))})}).catch(e=>console.error("Помилка при завантаженні категорій книг:",e))}function C(e){const t=document.createElement("div");t.className="book-category",t.setAttribute("data-category",e);const o=document.createElement("div");o.className="category-title";const n=document.createElement("span");n.textContent=e.toUpperCase(),o.appendChild(n);const s=document.createElement("div");s.className="books";const i=document.createElement("ul");i.className="books-category-list",s.appendChild(i);const a=document.createElement("button");return a.className="see-more",a.textContent="SEE MORE",t.appendChild(o),t.appendChild(s),t.appendChild(a),t}function v(){const e=document.querySelector(".best-sellers-list");u().then(t=>{t.slice(0,5).forEach(o=>{const n=C(o.list_name);e.appendChild(n)})}).catch(t=>console.error("Помилка при завантаженні категорій книг:",t))}document.addEventListener("DOMContentLoaded",v);document.addEventListener("DOMContentLoaded",L);const S=document.querySelector(".category-list-container");u().then(e=>e.map(t=>`<li class="category-list-item">
    <button class="category-btn" type="button">
      ${t.list_name}
    </button>
  </li>`).join("")).then(e=>S.insertAdjacentHTML("afterbegin",e));
//# sourceMappingURL=commonHelpers.js.map
